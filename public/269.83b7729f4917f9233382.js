"use strict";(self.webpackChunksparklingv2=self.webpackChunksparklingv2||[]).push([[269],{5269:(Y,Z,c)=>{c.r(Z),c.d(Z,{TransactionModule:()=>Q});var l=c(8583),s=c(4655),t=c(7716),f=c(6215),d=c(5947);let y=(()=>{class n{constructor(e){this.scriptService=e,this.charts=new f.X([])}newChart(e,a){let i=new ApexCharts(document.querySelector(`#${e}`),a);return this.charts.next(i),{chart:i,id:e}}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(d.x))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),T=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-transaction-list"]],decls:20,vars:0,consts:[[1,"row"],[1,"col-md-12"],[1,"mb-30"],[1,"table-responsive"],[1,"data-table","table","nowrap"],[1,"table-plus"],[1,"datatable-nosort"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h2",2),t._uU(3,"List Of Transactions"),t.qZA(),t.qZA(),t.TgZ(4,"div",1),t.TgZ(5,"div",3),t.TgZ(6,"table",4),t.TgZ(7,"thead"),t.TgZ(8,"tr"),t.TgZ(9,"th",5),t._uU(10,"Amount"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Transaction Code"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Name"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Status"),t.qZA(),t.TgZ(17,"th",6),t._uU(18,"Actions"),t.qZA(),t.qZA(),t.qZA(),t._UZ(19,"tbody"),t.qZA(),t.qZA(),t.qZA(),t.qZA())},styles:[""]}),n})();const A=function(){return["/accounting/home"]};let b=(()=>{class n{constructor(e,a){this.apexService=e,this.ss=a,this.chartId=`Chart${this.ss.generateRandomAlphanumeric(10)}`}ngAfterViewInit(){let e={series:[{name:"Monday",data:[...Array(6)].map(a=>~~(40*Math.random()))},{name:"Tuesday",data:[...Array(6)].map(a=>~~(40*Math.random()))},{name:"Wednesday",data:[...Array(6)].map(a=>~~(40*Math.random()))},{name:"Thursday",data:[...Array(6)].map(a=>~~(40*Math.random()))},{name:"Friday",data:[...Array(6)].map(a=>~~(40*Math.random()))},{name:"Saturday",data:[...Array(6)].map(a=>~~(40*Math.random()))},{name:"Sunday",data:[...Array(6)].map(a=>~~(40*Math.random()))}],chart:{type:"bar",height:350},plotOptions:{bar:{horizontal:!1,columnWidth:"55%",endingShape:"rounded"}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:["Jul","Aug","Sep","Oct","Nov","Dec"]},yaxis:{title:{text:"$ (thousands)"}},fill:{opacity:1},tooltip:{y:{formatter:function(a){return"$ "+a+" thousands"}}}};this.apexService.newChart(this.chartId,e).chart.render()}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(y),t.Y36(d.x))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-index"]],decls:20,vars:3,consts:[[1,"page-header"],[1,"row"],[1,"col-md-6","col-sm-12"],[1,"title"],["aria-label","breadcrumb","role","navigation"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","javascript:void()","routerLinkActive","router-link-active",3,"routerLink"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-md-12"],["data-bgcolor","#455a64",1,"card-box","min-height-200px","pd-20","mb-20",2,"background-color","#fff"],[3,"id"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"h4"),t._uU(5,"Transaction"),t.qZA(),t.qZA(),t.TgZ(6,"nav",4),t.TgZ(7,"ol",5),t.TgZ(8,"li",6),t.TgZ(9,"a",7),t._uU(10,"Home"),t.qZA(),t.qZA(),t.TgZ(11,"li",8),t._uU(12," Transaction "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",1),t.TgZ(14,"div",9),t.TgZ(15,"div",10),t._UZ(16,"div",11),t.qZA(),t.qZA(),t.TgZ(17,"div",9),t.TgZ(18,"div",10),t._UZ(19,"app-transaction-list"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(9),t.Q6J("routerLink",t.DdM(2,A)),t.xp6(7),t.Q6J("id",a.chartId))},directives:[s.yS,s.Od,T],styles:[""]}),n})();var g=c(8002);const q=function(){return["/accounting/home"]},_=function(){return["/accounting/transaction"]};let h=(()=>{class n{constructor(e,a){this.route=e,this.ss=a,this.invoice=this.route.params.pipe((0,g.U)(i=>({wallet:i.wallet,currencyToPay:i.currencyToPay,methodofPayment:i.methodofPayment,amount:i.amount})))}ngOnInit(){$(".js-tilt").tilt({scale:1.1})}hideValidate(e){var a=$(e).parent();$(a).removeClass("alert-validate")}onSubmit(e){e.preventDefault();for(var a=!0,i=$(".validate-input .input100"),r=0;r<i.length;r++)0==this.validate(i[r])&&(this.showValidate(i[r]),a=!1);return a&&this.sendToPay()}sendToPay(){this.invoice.subscribe(e=>this.generateTransaction(e))}generateTransaction(e){let a=Date.now();return Object.assign(Object.assign({},{code:"",status:"",type:"",method:"",transaction_id:"",tx_ref:"",flw_ref:"",currency:"",amount:"",charged_amount:"",who:"",charge_response_code:"",charge_response_message:"",created_at:"",updated_at:""}),{response:e,created_at:a,updated_at:a})}validate(e){if("email"==$(e).attr("type")||"email"==$(e).attr("name")){if(null==$(e).val().trim().match(/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{1,5}|[0-9]{1,3})(\]?)$/))return!1}else if(""==$(e).val().trim())return!1;return!0}showValidate(e){var a=$(e).parent();$(a).addClass("alert-validate")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.gz),t.Y36(d.x))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-generate"]],decls:47,vars:16,consts:[[1,"page-header"],[1,"row"],[1,"col-md-6","col-sm-12"],[1,"title"],["aria-label","breadcrumb","role","navigation"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","javascript:void()","routerLinkActive","router-link-active",3,"routerLink"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-md-12"],["data-bgcolor","#455a64",1,"card-box","min-height-200px","pd-20","mb-20",2,"background-color","#fff"],[1,"limiter"],[1,"container-login100"],[1,"wrap-login100"],[1,"login100-form","validate-form"],[1,"login101-form-title"],["data-validate","Bitcoin address required",1,"wrap-input100","validate-input"],["type","text","readonly","","name","addr","placeholder","Bitcoin address",1,"input100","addr",3,"value"],[1,"focus-input100"],[1,"symbol-input100"],["aria-hidden","true",1,"fa","fa-fort-awesome"],["data-validate","Amount required",1,"wrap-input100","validate-input"],["type","text","readonly","","name","amount","placeholder","0.00456045",1,"input100","amount",3,"value"],["aria-hidden","true",1,"fa","fa-btc"],[1,"container-login100-form-btn"],[1,"login100-form-btn",3,"click"],[1,"login102-form-title"],[1,"p-t-12"],[1,"txt1","resulturl"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"h4"),t._uU(5,"Transaction Invoice"),t.qZA(),t.qZA(),t.TgZ(6,"nav",4),t.TgZ(7,"ol",5),t.TgZ(8,"li",6),t.TgZ(9,"a",7),t._uU(10,"Home"),t.qZA(),t.qZA(),t.TgZ(11,"li",6),t.TgZ(12,"a",7),t._uU(13,"Transaction"),t.qZA(),t.qZA(),t.TgZ(14,"li",8),t._uU(15," Generate "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",1),t.TgZ(17,"div",9),t.TgZ(18,"div",10),t.TgZ(19,"div",11),t.TgZ(20,"div",12),t.TgZ(21,"div",13),t.TgZ(22,"form",14),t.TgZ(23,"span",15),t._uU(24," Generate Transaction "),t.qZA(),t.TgZ(25,"div",16),t._UZ(26,"input",17),t.ALo(27,"async"),t._UZ(28,"span",18),t.TgZ(29,"span",19),t._UZ(30,"i",20),t.qZA(),t.qZA(),t.TgZ(31,"div",21),t._UZ(32,"input",22),t.ALo(33,"async"),t._UZ(34,"span",18),t.TgZ(35,"span",19),t._UZ(36,"i",23),t.qZA(),t.qZA(),t.TgZ(37,"div",24),t.TgZ(38,"button",25),t.NdJ("click",function(r){return a.onSubmit(r)}),t._uU(39," Confirm "),t.qZA(),t.qZA(),t.TgZ(40,"span",26),t._uU(41),t.ALo(42,"async"),t.ALo(43,"async"),t.qZA(),t.TgZ(44,"div",27),t.TgZ(45,"pre",28),t._uU(46,"\n                "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(9),t.Q6J("routerLink",t.DdM(14,q)),t.xp6(3),t.Q6J("routerLink",t.DdM(15,_)),t.xp6(14),t.Q6J("value",t.lcZ(27,6,a.invoice).wallet),t.xp6(6),t.Q6J("value",t.lcZ(33,8,a.invoice).amount),t.xp6(9),t.AsE(" Paying Via ",t.lcZ(42,10,a.invoice).methodofPayment," at the rate ",t.lcZ(43,12,a.invoice).currencyToPay," "))},directives:[s.yS,s.Od],pipes:[l.Ov],styles:[""]}),n})();var v=c(8239),m=c(2340),x=c(5708),C=c(1659),P=c(4758);function w(n,o){1&n&&(t.TgZ(0,"span",19),t._uU(1," Cryptocurrency Payments "),t.qZA())}function U(n,o){1&n&&(t.TgZ(0,"span",19),t._uU(1," Third Party Fiat Payments "),t.qZA())}function S(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1,"BTC"),t.qZA())}function k(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1,"Naira"),t.qZA())}const I=function(n){return{"d-none":n}};function L(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",15),t.TgZ(1,"div",16),t.YNc(2,w,2,0,"span",17),t.YNc(3,U,2,0,"span",17),t.qZA(),t.TgZ(4,"div",16),t._UZ(5,"span",18),t.qZA(),t.TgZ(6,"span",19),t._UZ(7,"span",20),t.YNc(8,S,2,0,"span",21),t.YNc(9,k,2,0,"span",21),t.qZA(),t.TgZ(10,"div",22),t._UZ(11,"div",23),t.qZA(),t.TgZ(12,"div",22),t.TgZ(13,"a",24),t.TgZ(14,"button",25),t.NdJ("click",function(i){return t.CHM(e),t.oxw().pay(i)}),t._uU(15),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=o.ngIf;t.xp6(2),t.Q6J("ngIf","Cryptocurrency"==e.methodofPayment),t.xp6(1),t.Q6J("ngIf","Cryptocurrency"!==e.methodofPayment),t.xp6(5),t.Q6J("ngIf","Cryptocurrency"==e.methodofPayment),t.xp6(1),t.Q6J("ngIf","Cryptocurrency"!==e.methodofPayment),t.xp6(2),t.Q6J("ngClass",t.VKq(6,I,"Cryptocurrency"!==e.methodofPayment)),t.xp6(4),t.hij(" ","Cryptocurrency"==e.methodofPayment?"I have paid":"Pay With Flutterwave"," ")}}const M=function(){return["/accounting/home"]},z=function(){return["/accounting/transaction"]},J=function(){return["/accounting/generate"]},N=[{path:"",component:b},{path:"generate/:wallet/:amount/:methodofPayment/:currencyToPay",component:h},{path:"generate/:wallet/:amount/:methodofPayment/:currencyToPay",component:h},{path:"secure-pay/:amount/:addr/:methodofPayment",component:(()=>{class n{constructor(e,a,i,r,p){this.flutterwave=e,this.route=a,this.ds=i,this.scriptService=r,this._us=p,this.invoice=this.route.params.pipe((0,g.U)(u=>({wallet:u.wallet,addr:u.addr,currencyToPay:u.currencyToPay,methodofPayment:u.methodofPayment,amount:u.amount}))),this.publicKey=m.N.flutter_public_key,this.meta={counsumer_id:"",consumer_mac:""},this.user=null,this.customerDetails={name:"",amount:0,email:"",phone_number:""},this.customizations={title:"",description:"",logo:""},this.paymentData={public_key:this.publicKey,tx_ref:`APPSUB-${this.scriptService.generateRandomAlphanumeric(15)}`,amount:10,currency:"GBP",payment_options:"card,ussd",meta:this.meta,customer:this.customerDetails,customizations:this.customizations}}ngAfterViewInit(){this.invoice.subscribe(e=>{(!e.addr||!e.amount||!e.methodofPayment)&&this.scriptService.changePage("accounting/wallet"),$(".js-tilt").tilt({scale:1.1}),new QRCode("qrcode",{text:"bitcoin:"+m.N.btc+"?amount="+e.amount,width:250,height:250,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H}),$(".btcaddr").text(m.N.btc),$(".btcamount").text(e.amount),$(".wallet").attr("href","bitcoin:"+m.N.btc+"?amount="+e.amount),$(".altcoins").attr("href","https://shapeshift.io/shifty.html?destination="+e.addr+"&output=BTC&apiKey=&amount="+e.amount)})}ngOnInit(){}hideValidate(e){var a=$(e).parent();$(a).removeClass("alert-validate")}onSubmit(){for(var e=!0,a=$(".validate-input .input100"),i=0;i<a.length;i++)0==this.validate(a[i])&&(this.showValidate(a[i]),e=!1);return e}pay(e){var a=this;e.preventDefault(),this.invoice.subscribe(function(){var i=(0,v.Z)(function*(r){return yield a.makePayment(r)});return function(r){return i.apply(this,arguments)}}())}makePayment(e,a={public_key:this.publicKey,tx_ref:`APPSUB-${this.scriptService.generateRandomAlphanumeric(15)}`,amount:parseFloat(`${e.amount}`),currency:"NGN",payment_options:"card,ussd",meta:this.meta,customer:this.customerDetails,customizations:this.customizations}){var i=this;return(0,v.Z)(function*(){const r=i._us.getuser();a.customizations=Object.assign(Object.assign({},i.customizations),{logo:"",title:`Funding Wallet ${e.addr}`,description:`Payment of ${e.amount} to ${e.addr} by ${r.firstName} via ${e.methodofPayment}`}),a.customer=Object.assign(Object.assign({},i.customerDetails),{name:`${r.firstName}`,email:`${r.email}`,phone_number:`${r.phone}`,amount:a.amount}),i.ds.showSpinner(),"Cryptocurrency"==e.methodofPayment?(i.ds.oInfoNotification("Starting Confirmation","Your transaction has been submitted and will be confirmed in 5-10 minutes"),i.ds.hideSpinner()):(i.ds.oInfoNotification("Starting Flutterwave","Your transaction has been submitted and will be confirmed in 5-10 minutes"),yield i.flutterwave.asyncInlinePay(a).then(p=>{i.flutterwave.closePaymentModal(5)}).finally(()=>{i.ds.hideSpinner()}))})()}save(e){}validate(e){if("email"==$(e).attr("type")||"email"==$(e).attr("name")){if(null==$(e).val().trim().match(/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{1,5}|[0-9]{1,3})(\]?)$/))return!1}else if(""==$(e).val().trim())return!1;return!0}showValidate(e){var a=$(e).parent();$(a).addClass("alert-validate")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x.Bh),t.Y36(s.gz),t.Y36(C.U),t.Y36(d.x),t.Y36(P.K))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-pay"]],decls:27,vars:9,consts:[[1,"page-header"],[1,"row"],[1,"col-md-6","col-sm-12"],[1,"title"],["aria-label","breadcrumb","role","navigation"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","javascript:void()","routerLinkActive","router-link-active",3,"routerLink"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-md-12"],["data-bgcolor","#455a64",1,"card-box","min-height-200px","pd-20","mb-20",2,"background-color","#fff"],[1,"limiter"],[1,"container-login100"],[1,"wrap-login100"],["class","login100-form",4,"ngIf"],[1,"login100-form"],[1,"text-center","p-t-12"],["class","login100-form-title",4,"ngIf"],[1,"txt1","btcaddr"],[1,"login100-form-title"],[1,"btcamount"],[4,"ngIf"],[1,"container-login100-form-btn"],["id","qrcode",3,"ngClass"],["href","javascript:void()",1,"wallet"],[1,"login100-form-btn",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"h4"),t._uU(5,"Transaction"),t.qZA(),t.qZA(),t.TgZ(6,"nav",4),t.TgZ(7,"ol",5),t.TgZ(8,"li",6),t.TgZ(9,"a",7),t._uU(10,"Home"),t.qZA(),t.qZA(),t.TgZ(11,"li",6),t.TgZ(12,"a",7),t._uU(13,"Transaction"),t.qZA(),t.qZA(),t.TgZ(14,"li",6),t.TgZ(15,"a",7),t._uU(16,"Generate"),t.qZA(),t.qZA(),t.TgZ(17,"li",8),t._uU(18," Pay "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",1),t.TgZ(20,"div",9),t.TgZ(21,"div",10),t.TgZ(22,"div",11),t.TgZ(23,"div",12),t.TgZ(24,"div",13),t.YNc(25,L,16,8,"div",14),t.ALo(26,"async"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(9),t.Q6J("routerLink",t.DdM(6,M)),t.xp6(3),t.Q6J("routerLink",t.DdM(7,z)),t.xp6(3),t.Q6J("routerLink",t.DdM(8,J)),t.xp6(10),t.Q6J("ngIf",t.lcZ(26,4,a.invoice)))},directives:[s.yS,s.Od,l.O5,l.mk],pipes:[l.Ov],styles:[""]}),n})()}];let O=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[s.Bz.forChild(N)],s.Bz]}),n})(),Q=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[l.ez,O]]}),n})()}}]);