"use strict";(self.webpackChunksparklingv2=self.webpackChunksparklingv2||[]).push([[186],{6186:(dt,q,l)=>{l.r(q),l.d(q,{AuthModule:()=>lt});var m=l(8583),c=l(4655),g=l(8239),r=l(3679),b=l(7349),w=l(5304),h=l(2340),Z=l(205),t=l(7716),v=l(1521),A=l(5947),T=l(1659),_=l(9866);const F=function(){return["/"]},L=function(){return["/auth/register"]},C=function(){return["/auth/setup-login"]};let x=(()=>{class s{constructor(e,o,i,u,p){this.formBuilder=e,this.router=o,this.auth=i,this._scriptService=u,this._ds=p,this.user=null,this.message="",this.passageAuth=h.N.passageAppId,this.appName=h.N.appName,this.timeToSet=()=>setTimeout(()=>{this.clearBrowserAutoFill(),this.loginForm.controls.created_at.setValue(new Date(Date.now()))},1e3),this.loginForm=this.formBuilder.group({created_at:[new Date(Date.now()),r.kI.required],submited_at:[null,r.kI.required],email:["",[r.kI.required,r.kI.email]],password:["",[r.kI.required,r.kI.minLength(6)]],password_type:["password",r.kI.required],passwordless:[!1,r.kI.required]})}ngAfterViewInit(){var e=this;return(0,g.Z)(function*(){e.timeToSet()})()}ngOnInit(){var e=this;return(0,g.Z)(function*(){e.auth.sessionAuth&&e.router.navigate(["admin"])})()}setpassword_type(){this.loginForm.controls.password_type.setValue("text"==this.password_type?"password":"text")}get password_type(){return this.loginForm.controls.password_type.value}get passwordless(){return this.loginForm.controls.passwordless.value}signIn(e){var o=this;if(e.preventDefault(),this.message="","INVALID"==this.loginForm.controls.email.status)return this.message="Opps you entereed an invalid email",void this._ds.oErrorNotification("Opps, Invalid Form",this.message);if(this.loginForm.controls.submited_at.setValue(new Date(Date.now())),this.passwordless)return this._ds.showSpinner(),void this.auth.passageLogin(this.loginForm.controls.email.value).then(a=>{a.auth_token&&this.router.navigate([a.redirect_url]).catch(d=>{this.router.navigate([""]),this._ds.oSuccessNotification("Authenticated","Welcome back to Zinder. You have been logged in.")}).finally(()=>this._ds.oSuccessNotification("Authenticated","Welcome back to Zinder. You have been logged in.")),console.log(a)}).catch(function(){var a=(0,g.Z)(function*(d){return console.log(JSON.stringify(d)),o.message=d.message,o._ds.oErrorNotification("Opps",d.message),(0,Z._)(d)});return function(d){return a.apply(this,arguments)}}()).finally(()=>{this._ds.hideSpinner()});this.resetFormStyle();const i=document.getElementById("password");if(document.getElementById("email").classList.add("INVALID"==this.loginForm.controls.email.status?"error-border":"sucess-border"),i.classList.add("INVALID"==this.loginForm.controls.password.status?"error-border":"sucess-border"),!this.loginForm.valid)return void this.loginForm.controls.submited_at.setValue(null);this._ds.showSpinner();const p=this.postUserToServer();this.user=p,this.auth.login(this.user).pipe((0,b.d)(),(0,w.K)(a=>(console.log(a),this._ds.hideSpinner(),(0,Z._)(a)))).subscribe(a=>{if(this._ds.hideSpinner(),this.message=a.response,"200"==a.status){const d={title:"Login Successful",message:`You have scuccessfully logged in at ${new Date(Date.now()).toLocaleString()}`,status:"unseen",userID:a.user.id,created_at:new Date(Date.now()),updated_at:new Date(Date.now())};this.router.navigate(["admin/home/dashboard"]).finally(()=>{this._ds.add(d).subscribe()})}})}resetFormStyle(){const e=document.getElementById("password"),o=document.getElementById("email");o.classList.remove("error-border"),e.classList.remove("error-border"),o.classList.remove("no-border"),e.classList.remove("no-border"),o.classList.remove("sucess-border"),e.classList.remove("sucess-border")}postUserToServer(){let e={};return Object.entries(this.loginForm.value).forEach(([o,i])=>{"created_at"!=o&&"submited_at"!=o&&(e[o]=i)}),e}clearBrowserAutoFill(){const e=document.getElementById("password"),o=document.getElementById("email");e&&(e.value=" ".trim()),o&&(o.value=" ".trim())}toggleChecbox(){var e;if(this.passwordless){const o=document.getElementsByClassName("passage-branding");o&&(null===(e=o.item(0))||void 0===e||e.remove())}}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(r.qu),t.Y36(c.F0),t.Y36(v.e),t.Y36(A.x),t.Y36(T.U))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-login"]],features:[t._Bn([])],decls:28,vars:9,consts:[[1,"login-header","box-shadow"],[1,"container-fluid","d-flex","justify-content-between","align-items-center"],[1,"brand-logo"],["href","javascript:void()","routerLinkActive","router-link-active",3,"routerLink"],["src","assets/img/zinder_1.svg","alt",""],[1,"login-menu"],[1,"login-wrap","d-flex","align-items-center","flex-wrap","justify-content-center"],[1,"container"],["type","ball-scale-multiple"],[1,"row","align-items-center"],[1,"col-md-6","col-lg-7"],["src","assets/img/mobile_login.svg","alt",""],[1,"col-md-6","col-lg-5"],[1,"login-box","bg-white","box-shadow","border-radius-10"],[1,"login-title"],[1,"text-center","text-primary"],[3,"formGroup"],[1,"row"],[1,"col-md-12"],[3,"appId"],[1,"col-md-12","text-center"],["href","javascript:void()","routerLinkActive","router-link-active",1,"text-primary",3,"routerLink"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"a",3),t._UZ(4,"img",4),t.qZA(),t.qZA(),t.TgZ(5,"div",5),t.TgZ(6,"ul"),t.TgZ(7,"li"),t.TgZ(8,"a",3),t._uU(9,"Join Today"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div",6),t.TgZ(11,"div",7),t._UZ(12,"ngx-spinner",8),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t._UZ(15,"img",11),t.qZA(),t.TgZ(16,"div",12),t.TgZ(17,"div",13),t.TgZ(18,"div",14),t.TgZ(19,"h2",15),t._uU(20),t.qZA(),t.qZA(),t.TgZ(21,"form",16),t.TgZ(22,"div",17),t.TgZ(23,"div",18),t._UZ(24,"passage-auth",19),t.qZA(),t.TgZ(25,"div",20),t.TgZ(26,"a",21),t._uU(27,"First Time Login"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("routerLink",t.DdM(6,F)),t.xp6(5),t.Q6J("routerLink",t.DdM(7,L)),t.xp6(12),t.hij("",o.appName," Account"),t.xp6(1),t.Q6J("formGroup",o.loginForm),t.xp6(3),t.Q6J("appId",o.passageAuth),t.xp6(2),t.Q6J("routerLink",t.DdM(8,C)))},directives:[c.yS,c.Od,_.Ro,r._Y,r.JL,r.sg],styles:[".passage-branding[_ngcontent-%COMP%]{display:none!important}"]}),s})();var k=l(8002),N=l(3342),f=l(4553),y=l(8295),U=l(9983),S=l(1095);function D(s,n){1&s&&t._uU(0,"Personal Info")}function J(s,n){1&s&&t._uU(0,"Account Information")}function E(s,n){if(1&s&&(t.TgZ(0,"div"),t.TgZ(1,"p",22),t._uU(2,"You are almost now done."),t.qZA(),t.TgZ(3,"p",22),t._uU(4),t.qZA(),t.TgZ(5,"p",22),t._uU(6),t.qZA(),t.TgZ(7,"p",22),t._uU(8),t.qZA(),t.TgZ(9,"p",22),t._uU(10),t.qZA(),t.TgZ(11,"p",22),t._uU(12),t.qZA(),t.TgZ(13,"p",22),t._uU(14),t.qZA(),t.qZA()),2&s){const e=t.oxw();t.xp6(4),t.hij("Firstname: ",e.firstControls.firstName.value,""),t.xp6(2),t.hij("Lastname: ",e.firstControls.lastName.value,""),t.xp6(2),t.hij("Country: ",e.firstControls.country.value,""),t.xp6(2),t.hij("Phone: ",e.firstControls.phone.value,""),t.xp6(2),t.hij("Email: ",e.secondControls.email.value,""),t.xp6(2),t.hij("Password: ",e.secondControls.password.value,"")}}function B(s,n){if(1&s&&(t.TgZ(0,"div"),t.TgZ(1,"p",36),t._uU(2),t.qZA(),t.TgZ(3,"p",37),t._uU(4,"One step to go, Re-enter info one more time."),t.qZA(),t.TgZ(5,"div",21),t._UZ(6,"passage-register",38),t.qZA(),t.qZA()),2&s){const e=t.oxw();t.xp6(2),t.Oqu(e.message),t.xp6(4),t.Q6J("appId",e.passageAuth)}}function Y(s,n){1&s&&(t.TgZ(0,"button",32),t._uU(1,"Back"),t.qZA())}function O(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){return t.CHM(e),t.oxw().submit()}),t._uU(1,"Submit"),t.qZA()}2&s&&t.Udp("background-color","#009b72")}const Q=function(){return["/"]},j=function(){return["/auth/login"]};let M=(()=>{class s{constructor(e,o,i,u,p){this._formBuilder=e,this.auth=o,this.router=i,this.deviceService=u,this.scriptService=p,this.firstFormGroup=this._formBuilder.group({firstName:["",r.kI.required],lastName:["",r.kI.required],country:["",r.kI.required],phone:["",r.kI.required]}),this.secondFormGroup=this._formBuilder.group({email:["",[r.kI.required,r.kI.email]],password:["",[r.kI.required,r.kI.minLength(6)]]}),this.isLinear=!0,this.filterByRole="Admin",this.saved=!1,this.message="",this.url="",this.passageAuth=h.N.passageAppId,this.appName=h.N.appName,this.newAppName="Become An Admin"}ngOnInit(){this.url=this.router.url}saveCompleted(e){}get firstControls(){return this.firstFormGroup.controls}get secondControls(){return this.secondFormGroup.controls}submit(){let e=this.secondControls.email.value,o={who:"GUEST",firstName:this.firstControls.firstName.value.trim(),lastName:this.firstControls.lastName.value.trim(),country:this.firstControls.country.value.trim(),phone:this.firstControls.phone.value,email:e.trim(),code:`ZU-${this.scriptService.hashFnv32a(e.trim(),!0,e.trim().length)}`,password:this.secondControls.password.value.trim(),role:["Admin"],created_at:new Date(Date.now()).toISOString(),updated_at:new Date(Date.now()).toISOString(),status:"Active"};this.deviceService.showSpinner(),this.auth.register(o).pipe((0,w.K)(i=>this.handleError(i.response)),(0,k.U)(i=>i),(0,N.b)(()=>this.saved=!0)).subscribe(i=>{this.deviceService.showSpinner(),this.deviceService.oSuccessNotification("Account Created",this.message),this.message=i.response,this.deviceService.hideSpinner()})}handleError(e){return this.deviceService.showSpinner(),this.deviceService.oErrorNotification("Opps",e),this.deviceService.hideSpinner(),"Email registered to a zinder account, please login/register your login account via the login page."==e&&this.router.navigate(["auth/login"]),(0,Z._)(e)}loginnow(){this.router.navigate(["auth/login"])}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(r.qu),t.Y36(v.e),t.Y36(c.F0),t.Y36(T.U),t.Y36(A.x))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-register"]],decls:75,vars:16,consts:[[1,"login-header","box-shadow"],[1,"container-fluid","d-flex","justify-content-between","align-items-center"],[1,"brand-logo"],["href","javascript:void()","routerLinkActive","router-link-active",3,"routerLink"],["src","assets/img/zinder_1.svg","alt",""],[1,"login-menu"],[1,"login-wrap","d-flex","align-items-center","flex-wrap","justify-content-center"],[1,"container"],["type","ball-scale-multiple"],[1,"row","align-items-center"],[1,"col-md-6","col-lg-6"],["src","assets/img/register-company.gif","alt",""],[1,"login-box","bg-white","box-shadow","border-radius-10","organisetihis"],[1,"login-title"],[1,"text-center","text-primary"],[3,"linear"],["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel","","class","text-white"],[1,"row"],[1,"col-md-12"],[1,"text-white"],["matInput","","placeholder","First name","formControlName","firstName","required","",1,"text-white"],["matInput","","placeholder","Last name","formControlName","lastName","required","",1,"text-white"],["matInput","","placeholder","Country","formControlName","country","required","",1,"text-white"],["matInput","","placeholder","Phone","formControlName","phone","required","",1,"text-white"],["mat-button","","matStepperNext","",1,"text-white","btn"],["label","Login Information",3,"stepControl"],[1,"col-12"],["matInput","","formControlName","email","placeholder","Email","type","email","required","",1,"text-white"],["matInput","","formControlName","password","placeholder","Password","type","password","required","",1,"text-white"],["mat-button","","matStepperPrevious","",1,"text-white","btn","spacel"],[4,"ngIf"],["mat-button","","matStepperPrevious","","class","text-white btn spacel",4,"ngIf"],["mat-button","","class","text-white btn",3,"background-color","click",4,"ngIf"],[1,"text-white","mb-10"],[1,"text-white","font-12","mb-10"],[3,"appId"],["mat-button","",1,"text-white","btn",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"a",3),t._UZ(4,"img",4),t.qZA(),t.qZA(),t.TgZ(5,"div",5),t.TgZ(6,"ul"),t.TgZ(7,"li"),t.TgZ(8,"a",3),t._uU(9,"Login"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div",6),t.TgZ(11,"div",7),t._UZ(12,"ngx-spinner",8),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t._UZ(15,"img",11),t.qZA(),t.TgZ(16,"div",10),t.TgZ(17,"div",12),t.TgZ(18,"div",13),t.TgZ(19,"h2",14),t._uU(20),t.qZA(),t.qZA(),t.TgZ(21,"mat-stepper",15,16),t.TgZ(23,"mat-step",17),t.TgZ(24,"form",18),t.YNc(25,D,1,0,"ng-template",19),t.TgZ(26,"div",20),t.TgZ(27,"div",21),t.TgZ(28,"mat-form-field"),t.TgZ(29,"mat-label",22),t._uU(30,"First Name"),t.qZA(),t._UZ(31,"input",23),t.qZA(),t.qZA(),t.TgZ(32,"div",21),t.TgZ(33,"mat-form-field"),t.TgZ(34,"mat-label",22),t._uU(35,"Last Name"),t.qZA(),t._UZ(36,"input",24),t.qZA(),t.qZA(),t.TgZ(37,"div",21),t.TgZ(38,"mat-form-field"),t.TgZ(39,"mat-label",22),t._uU(40,"Country"),t.qZA(),t._UZ(41,"input",25),t.qZA(),t.qZA(),t.TgZ(42,"div",21),t.TgZ(43,"mat-form-field"),t.TgZ(44,"mat-label",22),t._uU(45,"Phone"),t.qZA(),t._UZ(46,"input",26),t.qZA(),t.qZA(),t.qZA(),t.TgZ(47,"div"),t.TgZ(48,"button",27),t._uU(49,"Next"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"mat-step",28),t.TgZ(51,"form",18),t.TgZ(52,"div",20),t.TgZ(53,"div",29),t.TgZ(54,"mat-form-field"),t.TgZ(55,"mat-label",22),t._uU(56,"Email"),t.qZA(),t._UZ(57,"input",30),t.qZA(),t.qZA(),t.TgZ(58,"div",29),t.TgZ(59,"mat-form-field"),t.TgZ(60,"mat-label",22),t._uU(61,"Password"),t.qZA(),t._UZ(62,"input",31),t.qZA(),t.qZA(),t.qZA(),t.TgZ(63,"div"),t.TgZ(64,"button",32),t._uU(65,"Back"),t.qZA(),t.TgZ(66,"button",27),t._uU(67,"Next"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(68,"mat-step"),t.YNc(69,J,1,0,"ng-template",19),t.YNc(70,E,15,6,"div",33),t.YNc(71,B,7,2,"div",33),t.TgZ(72,"div"),t.YNc(73,Y,2,0,"button",34),t.YNc(74,O,2,2,"button",35),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("routerLink",t.DdM(14,Q)),t.xp6(5),t.Q6J("routerLink",t.DdM(15,j)),t.xp6(12),t.Oqu(o.newAppName),t.xp6(1),t.Udp("background-color","#021645"),t.Q6J("linear",o.isLinear),t.xp6(2),t.Q6J("stepControl",o.firstFormGroup),t.xp6(1),t.Q6J("formGroup",o.firstFormGroup),t.xp6(26),t.Q6J("stepControl",o.secondFormGroup),t.xp6(1),t.Q6J("formGroup",o.secondFormGroup),t.xp6(19),t.Q6J("ngIf",!o.saved),t.xp6(1),t.Q6J("ngIf",o.saved),t.xp6(2),t.Q6J("ngIf",!o.saved),t.xp6(1),t.Q6J("ngIf",!o.saved))},directives:[c.yS,c.Od,_.Ro,f.Vq,f.C0,r._Y,r.JL,r.sg,f.VY,y.KE,y.hX,U.Nt,r.Fj,r.JJ,r.u,r.Q7,S.lW,f.Ic,f.fd,m.O5],styles:[".mat-stepper-horizontal[_ngcontent-%COMP%]{margin-top:8px}.mat-mdc-form-field[_ngcontent-%COMP%]{margin-top:16px}.text-white[_ngcontent-%COMP%]{color:#fff}.organisetihis[_ngcontent-%COMP%]{max-width:none!important;width:100%}.mat-form-field[_ngcontent-%COMP%]{width:100%!important}.btn[_ngcontent-%COMP%]{border:1px solid white}.spacel[_ngcontent-%COMP%]{margin-right:2px}.fonts[_ngcontent-%COMP%]{font-size:22px}"]}),s})();function P(s,n){if(1&s&&(t.TgZ(0,"div",17),t._UZ(1,"input",29),t.TgZ(2,"div",19),t.TgZ(3,"span",20),t._UZ(4,"i",30),t.qZA(),t.qZA(),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.uIk("readonly","yet"!=e.code_status||null)}}const I=function(s,n){return{"dw-padlock1":s,"dw-eye":n}};function R(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"div",17),t._UZ(1,"input",31),t.TgZ(2,"div",32),t.NdJ("click",function(){return t.CHM(e),t.oxw().setpassword_type()}),t.TgZ(3,"span",20),t._UZ(4,"i",33),t.qZA(),t.qZA(),t.qZA()}if(2&s){const e=t.oxw();t.xp6(1),t.s9C("type",e.password_type),t.xp6(3),t.Q6J("ngClass",t.WLB(2,I,"password"==e.password_type,"text"==e.password_type))}}function V(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"div",17),t._UZ(1,"input",34),t.TgZ(2,"div",32),t.NdJ("click",function(){return t.CHM(e),t.oxw().setpassword_type()}),t.TgZ(3,"span",20),t._UZ(4,"i",33),t.qZA(),t.qZA(),t.qZA()}if(2&s){const e=t.oxw();t.xp6(1),t.s9C("type",e.password_type),t.xp6(3),t.Q6J("ngClass",t.WLB(2,I,"password"==e.password_type,"text"==e.password_type))}}function G(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"a",35),t.NdJ("click",function(i){return t.CHM(e),t.oxw().submit(i)}),t._uU(1,"Submit"),t.qZA()}}function z(s,n){1&s&&(t.TgZ(0,"div",36),t._uU(1," OR "),t.qZA())}const W=function(){return["/"]},H=function(){return["/auth/register"]},X=function(){return["/auth/login"]};let K=(()=>{class s{constructor(e,o,i){this.formBuilder=e,this.auth=o,this.router=i,this.message="",this.changed=!1,this.forgotForm=this.formBuilder.group({created_at:[new Date(Date.now()),r.kI.required],submited_at:[null,r.kI.required],email:["",[r.kI.required,r.kI.email]],email_status:["yet",[r.kI.required]],code:["",[r.kI.required,r.kI.minLength(4),r.kI.maxLength(5)]],code_status:["yet",[r.kI.required]],password:["",[r.kI.required,r.kI.minLength(6)]],confirmationpassword:["",[r.kI.required,r.kI.minLength(6)]],password_type:["password",r.kI.required]})}ngAfterViewInit(){}ngOnInit(){this.auth.sessionAuth&&this.router.navigate(["admin"])}setpassword_type(){this.forgotForm.controls.password_type.setValue("text"==this.password_type?"password":"text")}get email_status(){return this.forgotForm.controls.email_status.value}get code_status(){return this.forgotForm.controls.code_status.value}get password_status(){return this.forgotForm.controls.password.status}get password_type(){return this.forgotForm.controls.password_type.value}processForEmail(){const e=document.getElementById("email");e.classList.remove("error-border"),e.classList.remove("no-border"),e.classList.remove("sucess-border"),"INVALID"==this.forgotForm.controls.email.status?(e.classList.add("error-boarder"),this.message="Email is invalid"):this.forgotForm.controls.email_status.setValue("approved")}processForCode(){const e=document.getElementById("code");e.classList.remove("error-border"),e.classList.remove("no-border"),e.classList.remove("sucess-border"),"INVALID"==this.forgotForm.controls.code.status?(e.classList.add("error-boarder"),this.message="Code is invalid"):(this.forgotForm.controls.code_status.setValue("approved"),this.forgotForm.controls.email_status.setValue("pending code"))}processForPassword(){const e=document.getElementById("password");if(e.classList.remove("error-border"),e.classList.remove("no-border"),e.classList.remove("sucess-border"),"INVALID"==this.forgotForm.controls.password.status)e.classList.add("error-boarder"),this.message="Password is not accepted";else{const o=document.getElementById("confirmationpassword");o.classList.remove("error-border"),o.classList.remove("no-border"),o.classList.remove("sucess-border"),this.forgotForm.controls.confirmationpassword.value!==this.forgotForm.controls.password.value?(o.classList.add("error-boarder"),this.message="Retyped password does not match your new password"):(this.forgotForm.controls.submited_at.setValue(new Date(Date.now())),this.changeNewPassword())}}submit(e){e.preventDefault(),this.message="","yet"!=this.email_status?"approved"!=this.email_status?"approved"!=this.code_status||this.processForPassword():this.processForCode():this.processForEmail()}changeNewPassword(){this.message="Password was successfully changed. You can login now",this.changed=!0}resetFormStyle(){const e=document.getElementById("email");e.classList.remove("error-border"),e.classList.remove("no-border"),e.classList.remove("sucess-border")}postUserToServer(){let e={};return Object.entries(this.forgotForm.value).forEach(([o,i])=>{"created_at"!=o&&"submited_at"!=o&&(e[o]=i)}),e}clearBrowserAutoFill(){const e=document.getElementById("password"),o=document.getElementById("email");e.value=" ".trim(),o.value=" ".trim()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(r.qu),t.Y36(v.e),t.Y36(c.F0))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-forgot"]],decls:41,vars:14,consts:[[1,"login-header","box-shadow"],[1,"container-fluid","d-flex","justify-content-between","align-items-center"],[1,"brand-logo"],["href","javascript:void()","routerLinkActive","router-link-active",3,"routerLink"],["src","assets/img/zinder_1.svg","alt",""],[1,"login-menu"],[1,"login-wrap","d-flex","align-items-center","flex-wrap","justify-content-center"],[1,"container"],["type","ball-scale-multiple"],[1,"row","align-items-center"],[1,"col-md-6","col-lg-7"],["src","assets/img/Forgot password-pana.svg","alt",""],[1,"col-md-6","col-lg-5"],[1,"login-box","bg-white","box-shadow","border-radius-10"],[1,"login-title"],[1,"text-center","text-primary"],[3,"formGroup"],[1,"input-group","custom"],["type","email","formControlName","email","id","email","value","","placeholder","Email",1,"form-control","form-control-lg"],[1,"input-group-append","custom"],[1,"input-group-text"],[1,"icon-copy","dw","dw-user1"],["class","input-group custom",4,"ngIf"],[1,"row"],[1,"col-sm-12"],[1,"input-group","mb-0"],["class","btn btn-primary btn-lg btn-block","href","javascript:void()",3,"click",4,"ngIf"],["class","font-16 weight-600 pt-10 pb-10 text-center","data-color","#707373",4,"ngIf"],["href","javascript:void()","routerLinkActive","router-link-active",1,"btn","btn-outline-primary","btn-lg","btn-block",3,"routerLink"],["type","text","formControlName","code","value","","id","code","placeholder","Enter Code",1,"form-control","form-control-lg"],[1,"dw","dw-coding"],["formControlName","password","value","","id","password","placeholder","New Password",1,"form-control","form-control-lg",3,"type"],[1,"input-group-append","custom",3,"click"],[1,"dw",3,"ngClass"],["formControlName","confirmationpassword","value","","id","confirmationpassword","placeholder","Retype Password",1,"form-control","form-control-lg",3,"type"],["href","javascript:void()",1,"btn","btn-primary","btn-lg","btn-block",3,"click"],["data-color","#707373",1,"font-16","weight-600","pt-10","pb-10","text-center"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"a",3),t._UZ(4,"img",4),t.qZA(),t.qZA(),t.TgZ(5,"div",5),t.TgZ(6,"ul"),t.TgZ(7,"li"),t.TgZ(8,"a",3),t._uU(9,"Register"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div",6),t.TgZ(11,"div",7),t._UZ(12,"ngx-spinner",8),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t._UZ(15,"img",11),t.qZA(),t.TgZ(16,"div",12),t.TgZ(17,"div",13),t.TgZ(18,"div",14),t.TgZ(19,"h2",15),t._uU(20,"Reset Password"),t.qZA(),t.qZA(),t.TgZ(21,"form",16),t.TgZ(22,"div",17),t._UZ(23,"input",18),t.TgZ(24,"div",19),t.TgZ(25,"span",20),t._UZ(26,"i",21),t.qZA(),t.qZA(),t.qZA(),t.YNc(27,P,5,1,"div",22),t.YNc(28,R,5,5,"div",22),t.YNc(29,V,5,5,"div",22),t.TgZ(30,"div"),t.TgZ(31,"p"),t._uU(32),t.qZA(),t.qZA(),t.TgZ(33,"div",23),t.TgZ(34,"div",24),t.TgZ(35,"div",25),t.YNc(36,G,2,0,"a",26),t.qZA(),t.YNc(37,z,2,0,"div",27),t.TgZ(38,"div",25),t.TgZ(39,"a",28),t._uU(40,"Login "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("routerLink",t.DdM(11,W)),t.xp6(5),t.Q6J("routerLink",t.DdM(12,H)),t.xp6(13),t.Q6J("formGroup",o.forgotForm),t.xp6(2),t.uIk("readonly","yet"!=o.email_status||null),t.xp6(4),t.Q6J("ngIf","approved"==o.email_status),t.xp6(1),t.Q6J("ngIf","approved"==o.code_status),t.xp6(1),t.Q6J("ngIf","VALID"==o.password_status),t.xp6(3),t.Oqu(o.message),t.xp6(4),t.Q6J("ngIf",!o.changed),t.xp6(1),t.Q6J("ngIf",!o.changed),t.xp6(2),t.Q6J("routerLink",t.DdM(13,X)))},directives:[c.yS,c.Od,_.Ro,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,m.O5,m.mk],styles:[""]}),s})();const $=function(s,n){return{"dw-padlock1":s,"dw-eye":n}};function tt(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"div",17),t._UZ(1,"input",29),t.TgZ(2,"div",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().setpassword_type()}),t.TgZ(3,"span",20),t._UZ(4,"i",31),t.qZA(),t.qZA(),t.qZA()}if(2&s){const e=t.oxw();t.xp6(1),t.s9C("type",e.password_type),t.xp6(3),t.Q6J("ngClass",t.WLB(2,$,"password"==e.password_type,"text"==e.password_type))}}const et=function(){return["/"]},ot=function(){return["/auth/register"]},st=function(){return["/auth/forgot"]},rt=[{path:"",component:x},{path:"setup-login",component:(()=>{class s{constructor(e,o,i,u,p){this.formBuilder=e,this.router=o,this.auth=i,this._scriptService=u,this._ds=p,this.user=null,this.message="",this.passageAuth=h.N.passageAppId,this.appName="Set up your Login Account",this.timeToSet=()=>setTimeout(()=>{this.clearBrowserAutoFill(),this.loginForm.controls.created_at.setValue(new Date(Date.now()))},1e3),this.loginForm=this.formBuilder.group({created_at:[new Date(Date.now()),r.kI.required],submited_at:[null,r.kI.required],email:["",[r.kI.required,r.kI.email]],password:["",[r.kI.required,r.kI.minLength(6)]],password_type:["password",r.kI.required],passwordless:[!1,r.kI.required]})}ngAfterViewInit(){var e=this;return(0,g.Z)(function*(){e.timeToSet()})()}ngOnInit(){var e=this;return(0,g.Z)(function*(){e.auth.sessionAuth&&e.router.navigate(["admin"])})()}setpassword_type(){this.loginForm.controls.password_type.setValue("text"==this.password_type?"password":"text")}get password_type(){return this.loginForm.controls.password_type.value}get passwordless(){return this.loginForm.controls.passwordless.value}signIn(e){var o=this;if(e.preventDefault(),this.message="","INVALID"==this.loginForm.controls.email.status)return this.message="Opps you entereed an invalid email",void this._ds.oErrorNotification("Opps, Invalid Form",this.message);if(this.loginForm.controls.submited_at.setValue(new Date(Date.now())),this.passwordless)return this._ds.showSpinner(),void this.auth.passageLogin(this.loginForm.controls.email.value).then(a=>{a.auth_token&&this.router.navigate([a.redirect_url]).catch(d=>{this.router.navigate([""]),this._ds.oSuccessNotification("Authenticated","Welcome back to Zinder. You have been logged in.")}).finally(()=>this._ds.oSuccessNotification("Authenticated","Welcome back to Zinder. You have been logged in.")),console.log(a)}).catch(function(){var a=(0,g.Z)(function*(d){return console.log(JSON.stringify(d)),o.message=d.message,o._ds.oErrorNotification("Opps",d.message),(0,Z._)(d)});return function(d){return a.apply(this,arguments)}}()).finally(()=>{this._ds.hideSpinner()});this.resetFormStyle();const i=document.getElementById("password");if(document.getElementById("email").classList.add("INVALID"==this.loginForm.controls.email.status?"error-border":"sucess-border"),i.classList.add("INVALID"==this.loginForm.controls.password.status?"error-border":"sucess-border"),!this.loginForm.valid)return void this.loginForm.controls.submited_at.setValue(null);this._ds.showSpinner();const p=this.postUserToServer();this.user=p,this.auth.login(this.user).pipe((0,b.d)(),(0,w.K)(a=>(console.log(a),this._ds.hideSpinner(),(0,Z._)(a)))).subscribe(a=>{if(this._ds.hideSpinner(),this.message=a.response,"200"==a.status){const d={title:"Login Successful",message:`You have scuccessfully logged in at ${new Date(Date.now()).toLocaleString()}`,status:"unseen",userID:a.user.id,created_at:new Date(Date.now()),updated_at:new Date(Date.now())};this.router.navigate(["admin/home/dashboard"]).finally(()=>{this._ds.add(d).subscribe()})}})}resetFormStyle(){const e=document.getElementById("password"),o=document.getElementById("email");o.classList.remove("error-border"),e.classList.remove("error-border"),o.classList.remove("no-border"),e.classList.remove("no-border"),o.classList.remove("sucess-border"),e.classList.remove("sucess-border")}postUserToServer(){let e={};return Object.entries(this.loginForm.value).forEach(([o,i])=>{"created_at"!=o&&"submited_at"!=o&&(e[o]=i)}),e}clearBrowserAutoFill(){const e=document.getElementById("password"),o=document.getElementById("email");e&&(e.value=" ".trim()),o&&(o.value=" ".trim())}toggleChecbox(){var e;if(this.passwordless){const o=document.getElementsByClassName("passage-branding");o&&(null===(e=o.item(0))||void 0===e||e.remove())}}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(r.qu),t.Y36(c.F0),t.Y36(v.e),t.Y36(A.x),t.Y36(T.U))},s.\u0275cmp=t.Xpm({type:s,selectors:[["login-setup"]],decls:39,vars:10,consts:[[1,"login-header","box-shadow"],[1,"container-fluid","d-flex","justify-content-between","align-items-center"],[1,"brand-logo"],["href","javascript:void()","routerLinkActive","router-link-active",3,"routerLink"],["src","assets/img/zinder_1.svg","alt",""],[1,"login-menu"],[1,"login-wrap","d-flex","align-items-center","flex-wrap","justify-content-center"],[1,"container"],["type","ball-scale-multiple"],[1,"row","align-items-center"],[1,"col-md-6","col-lg-7"],["src","assets/img/mobile_login.svg","alt",""],[1,"col-md-6","col-lg-5"],[1,"login-box","bg-white","box-shadow","border-radius-10"],[1,"login-title"],[1,"text-center","text-primary"],[3,"formGroup"],[1,"input-group","custom"],["type","email","formControlName","email","id","email","value","","placeholder","Email",1,"form-control","form-control-lg"],[1,"input-group-append","custom"],[1,"input-group-text"],[1,"icon-copy","dw","dw-user1"],["class","input-group custom",4,"ngIf"],[1,"row"],[1,"col-sm-12","pb-10","pt-10"],[1,"input-group","mb-0"],["href","javascript:void()",1,"btn","btn-primary","btn-lg","btn-block",3,"click"],[1,"col-12","pb-10","text-center"],["href","javascript:void()","routerLinkActive","router-link-active",1,"text-primary",3,"routerLink"],["formControlName","password","value","","id","password","placeholder","Enter Password",1,"form-control","form-control-lg",3,"type"],[1,"input-group-append","custom",3,"click"],[1,"dw",3,"ngClass"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"a",3),t._UZ(4,"img",4),t.qZA(),t.qZA(),t.TgZ(5,"div",5),t.TgZ(6,"ul"),t.TgZ(7,"li"),t.TgZ(8,"a",3),t._uU(9,"Join Today"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div",6),t.TgZ(11,"div",7),t._UZ(12,"ngx-spinner",8),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t._UZ(15,"img",11),t.qZA(),t.TgZ(16,"div",12),t.TgZ(17,"div",13),t.TgZ(18,"div",14),t.TgZ(19,"h2",15),t._uU(20),t.qZA(),t.qZA(),t.TgZ(21,"form",16),t.TgZ(22,"div",17),t._UZ(23,"input",18),t.TgZ(24,"div",19),t.TgZ(25,"span",20),t._UZ(26,"i",21),t.qZA(),t.qZA(),t.qZA(),t.YNc(27,tt,5,5,"div",22),t.TgZ(28,"div"),t.TgZ(29,"p"),t._uU(30),t.qZA(),t.qZA(),t.TgZ(31,"div",23),t.TgZ(32,"div",24),t.TgZ(33,"div",25),t.TgZ(34,"a",26),t.NdJ("click",function(u){return o.signIn(u)}),t._uU(35,"Confirm"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(36,"div",27),t.TgZ(37,"a",28),t._uU(38,"Or Login Now"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("routerLink",t.DdM(7,et)),t.xp6(5),t.Q6J("routerLink",t.DdM(8,ot)),t.xp6(12),t.hij("",o.appName," Account"),t.xp6(1),t.Q6J("formGroup",o.loginForm),t.xp6(6),t.Q6J("ngIf",!o.passwordless),t.xp6(3),t.Oqu(o.message),t.xp6(7),t.Q6J("routerLink",t.DdM(9,st)))},directives:[c.yS,c.Od,_.Ro,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,m.O5,m.mk],styles:[""]}),s})()},{path:"login",component:x},{path:"register",component:M},{path:"forgot",component:K}];let it=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[c.Bz.forChild(rt)],c.Bz]}),s})();var nt=l(8831),at=l(506);let lt=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[m.ez,it,nt.m,at.UserRoleModule]]}),s})()}}]);