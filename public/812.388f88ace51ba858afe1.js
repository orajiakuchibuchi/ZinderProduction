"use strict";(self.webpackChunksparklingv2=self.webpackChunksparklingv2||[]).push([[812],{1812:(P,h,s)=>{s.d(h,{e:()=>k});var p=s(8239),f=s(8002),C=s(3342),y=s(2340),e=s(7716),T=s(1659),A=s(5708),M=s(6252),c=s(4758),b=s(6659),l=s(3679),_=s(8583);function u(a,d){if(1&a&&(e.TgZ(0,"option",58),e._uU(1),e.qZA()),2&a){const n=d.$implicit;e.Q6J("value",n.id),e.xp6(1),e.hij(" ",n.name," ")}}function q(a,d){if(1&a&&(e.TgZ(0,"option",58),e._uU(1),e.qZA()),2&a){const n=d.$implicit;e.Q6J("value",n.id),e.xp6(1),e.AsE("",n.firstName," ",n.lastName,"")}}function m(a,d){if(1&a){const n=e.EpF();e.TgZ(0,"div",32),e.TgZ(1,"label"),e._uU(2,"Select Cleaner"),e.qZA(),e.TgZ(3,"select",59),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw(2).newBooking.cleaner=o}),e.TgZ(4,"option",35),e._uU(5,"Auto assign cleaner"),e.qZA(),e.YNc(6,q,2,3,"option",50),e.qZA(),e.qZA()}if(2&a){const n=d.ngIf,t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.newBooking.cleaner),e.xp6(3),e.Q6J("ngForOf",n)}}function x(a,d){if(1&a){const n=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"div",27),e.TgZ(2,"div",28),e.TgZ(3,"h4",29),e._uU(4),e.ALo(5,"date"),e.qZA(),e.qZA(),e.TgZ(6,"div",30),e.TgZ(7,"button",31),e._uU(8," Close "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",32),e.TgZ(10,"label"),e._uU(11,"Country "),e.TgZ(12,"span",33),e._uU(13,"Country"),e.qZA(),e.qZA(),e.TgZ(14,"select",34),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().newBooking.country=o}),e.TgZ(15,"option",35),e._uU(16,"Country"),e.qZA(),e.TgZ(17,"option",36),e._uU(18,"USA"),e.qZA(),e.TgZ(19,"option",37),e._uU(20,"UK"),e.qZA(),e.TgZ(21,"option",38),e._uU(22,"Nigeria"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",32),e.TgZ(24,"label"),e._uU(25,"Address "),e.TgZ(26,"span",33),e._uU(27,"*"),e.qZA(),e.qZA(),e.TgZ(28,"input",39),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().newBooking.name=o}),e.qZA(),e.qZA(),e.TgZ(29,"div",32),e.TgZ(30,"label"),e._uU(31,"Postal code "),e.TgZ(32,"span",33),e._uU(33,"*"),e.qZA(),e.qZA(),e.TgZ(34,"input",40),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().newBooking.postal=o}),e.qZA(),e.qZA(),e.TgZ(35,"div",32),e.TgZ(36,"label"),e._uU(37,"Start Period "),e.TgZ(38,"span",33),e._uU(39,"*"),e.qZA(),e.qZA(),e.TgZ(40,"input",41),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().newBooking.start=o}),e.qZA(),e.qZA(),e.TgZ(41,"div",32),e.TgZ(42,"label"),e._uU(43,"End Period "),e.TgZ(44,"span",33),e._uU(45,"*"),e.qZA(),e.qZA(),e.TgZ(46,"input",42),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().newBooking.end=o}),e.qZA(),e.qZA(),e.TgZ(47,"div",32),e.TgZ(48,"label"),e._uU(49,"Property Details "),e.TgZ(50,"span",33),e._uU(51,"*"),e.qZA(),e.qZA(),e.TgZ(52,"textarea",43),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().newBooking.description=o}),e.qZA(),e.qZA(),e.TgZ(53,"div",32),e.TgZ(54,"label"),e._uU(55,"Cleaning Frequency "),e.TgZ(56,"span",33),e._uU(57,"*"),e.qZA(),e.qZA(),e.TgZ(58,"select",44),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().newBooking.frequency=o}),e.TgZ(59,"option",35),e._uU(60,"Cleaning frequency"),e.qZA(),e.TgZ(61,"option",45),e._uU(62,"Weekly"),e.qZA(),e.TgZ(63,"option",46),e._uU(64,"Fortnightly"),e.qZA(),e.TgZ(65,"option",47),e._uU(66,"One-off"),e.qZA(),e.TgZ(67,"option",48),e._uU(68,"Multiple days a week"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(69,"div",32),e.TgZ(70,"label"),e._uU(71,"Pricing "),e.TgZ(72,"span",33),e._uU(73,"*"),e.qZA(),e.qZA(),e.TgZ(74,"select",49),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().setAmount(o)})("ngModelChange",function(o){return e.CHM(n),e.oxw().newBooking.pricing=o}),e.TgZ(75,"option",35),e._uU(76,"Select Pricing"),e.qZA(),e.YNc(77,u,2,2,"option",50),e.ALo(78,"async"),e.qZA(),e.qZA(),e.TgZ(79,"div",32),e.TgZ(80,"label"),e._uU(81,"Extra Service"),e.qZA(),e.TgZ(82,"select",51),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().newBooking.extra_service=o}),e.TgZ(83,"option",35),e._uU(84,"Extra Services"),e.qZA(),e.TgZ(85,"option",52),e._uU(86,"Ironing"),e.qZA(),e.TgZ(87,"option",53),e._uU(88,"Oven cleaning"),e.qZA(),e.TgZ(89,"option",54),e._uU(90,"Fridge cleaning"),e.qZA(),e.TgZ(91,"option",55),e._uU(92,"window cleaning"),e.qZA(),e.TgZ(93,"option",56),e._uU(94,"Laundry cleaning supplies and detergents"),e.qZA(),e.qZA(),e.qZA(),e.YNc(95,m,7,2,"div",57),e.ALo(96,"async"),e.TgZ(97,"div",32),e.TgZ(98,"label",33),e._uU(99),e.qZA(),e.qZA(),e.qZA()}if(2&a){const n=e.oxw();e.xp6(4),e.hij("Create Booking ",e.lcZ(5,15,n.selectedPeriod),""),e.xp6(10),e.Q6J("ngModel",n.newBooking.country),e.xp6(14),e.Q6J("ngModel",n.newBooking.name),e.xp6(6),e.Q6J("ngModel",n.newBooking.postal),e.xp6(6),e.s9C("min",n.today),e.Q6J("ngModel",n.newBooking.start),e.xp6(6),e.s9C("min",n.today),e.Q6J("ngModel",n.newBooking.end),e.xp6(6),e.Q6J("ngModel",n.newBooking.description),e.xp6(6),e.Q6J("ngModel",n.newBooking.frequency),e.xp6(16),e.Q6J("ngModel",n.newBooking.pricing),e.xp6(3),e.Q6J("ngForOf",e.lcZ(78,17,n.plans$)),e.xp6(5),e.Q6J("ngModel",n.newBooking.extra_service),e.xp6(13),e.Q6J("ngIf",e.lcZ(96,19,n.cleaners$)),e.xp6(4),e.Oqu(n.message)}}function w(a,d){if(1&a&&(e.TgZ(0,"div",62),e.TgZ(1,"div",63),e.TgZ(2,"button",64),e._uU(3),e.TgZ(4,"small"),e._uU(5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",65),e.TgZ(7,"div",66),e._uU(8),e.qZA(),e.qZA(),e.qZA()),2&a){const n=d.$implicit,t=d.index;e.xp6(2),e.uIk("data-target","#eventList_"+t),e.xp6(1),e.hij(" ",n.postal," "),e.xp6(2),e.AsE("",n.start," - ",n.end,""),e.xp6(1),e.MGl("id","eventList_",t,""),e.xp6(2),e.gL8(" ",n.cleaner," ",n.postal," ",n.country," ",n.extra_service," ",n.frequency," ",n.description," ")}}function U(a,d){if(1&a&&(e.TgZ(0,"div",60),e.TgZ(1,"h4",29),e._uU(2),e.ALo(3,"date"),e.qZA(),e.YNc(4,w,9,11,"div",61),e.qZA()),2&a){const n=e.oxw();e.xp6(2),e.hij("Bookings on ",e.lcZ(3,2,n.selectedPeriod),""),e.xp6(2),e.Q6J("ngForOf",n.eventList)}}function E(a,d){if(1&a){const n=e.EpF();e.TgZ(0,"button",67),e.NdJ("click",function(){return e.CHM(n),e.oxw().submit()}),e._uU(1," Save "),e.qZA()}}function O(a,d){1&a&&(e.TgZ(0,"button",68),e._uU(1," Download "),e.qZA())}let k=(()=>{class a{constructor(n,t,o,i,v,Z){this._ds=n,this.flutterwave=t,this._ps=o,this._us=i,this._bs=v,this.crf=Z,this.id="calendar",this.tagetCreate=!1,this.canCreate=!1,this.selectedPeriod=null,this.today=new Date,this.eventList=[],this.reference="ref-27535012752945",this.cleaners$=this._us.cleaners$,this.publicKey=y.N.flutter_public_key,this.newBooking={postal:"",start:this.today,end:null,name:"",description:"",frequency:"",extra_service:"",color:"fc-bg-default",icon:"circle",cleaner:null,country:"",pricing:null,payment:null},this.message="",this.amount=1,this.customizations={title:"Chow Cheap",description:"Make your final payment for this order and get your item delivered ASAP!",logo:"https://flutterwave.com/images/logo-colored.svg"},this.meta={counsumer_id:"7898",consumer_mac:"kjs9s8ss7dd"},this.user=null,this.customerDetails={name:"Demo Customer  Name",amount:0,email:"customer@mail.com",phone_number:"08100000000"},this.calendar=r=>jQuery(`#${this.id}`).fullCalendar(r),this.params={themeSystem:"bootstrap4",businessHours:!1,defaultView:"month",editable:!0,header:{left:"title",center:"month,agendaWeek,agendaDay",right:"today prev,next"},events:this.eventList,dayClick:r=>{this.clickedOnDay(r),jQuery("#modal-view-event-add").modal()},eventClick:(r,g,B)=>{jQuery(".event-icon").html("<i class='fa fa-"+r.icon+"'></i>"),jQuery(".event-title").html(r.title),jQuery(".event-postal").html(r.postal),jQuery(".event-country").html(r.country),jQuery(".event-frequency").html(r.frequency),jQuery(".event-start").html(r.start),jQuery(".event-end").html(r.end),jQuery(".event-cleaner").html(r.cleaner),jQuery(".event-extra_service").html(r.extra_service),jQuery(".event-body").html(r.description),jQuery(".eventUrl").attr("href",r.url),jQuery("#modal-view-event").modal()}},this.bookings$=this._bs.bookings$.pipe((0,f.U)(r=>r.map(g=>Object.assign(Object.assign({},g),{date:g.start,title:`${g.country} ${g.postal} Between ${g.from} to ${g.end}`}))),(0,C.b)(r=>{this.eventList=r,this.params.events=this.eventList})),this.plans$=this._ps.plans$,this.paymentData={public_key:this.publicKey,tx_ref:this.generateReference(),amount:10,currency:"GBP, USD, NGN, CAD",payment_options:"card,ussd",meta:this.meta,customer:this.customerDetails,customizations:this.customizations},this.today.setDate(this.today.getDate()-1),this.today=this.today.toISOString().slice(0,16)}ngOnDestroy(){}payViaPromise(){var n=this;return(0,p.Z)(function*(){return n.flutterwave.asyncInlinePay(n.paymentData)})()}generateReference(){return(new Date).getTime().toString()}setAmount(n){n?this.plans$.subscribe(t=>{var o;this.amount=null===(o=t.find(i=>i.id==n))||void 0===o?void 0:o.amount,this.customerDetails.amount=this.amount,this.paymentData.amount=this.amount}):this.amount=1}ngAfterViewInit(){this.bookings$.subscribe(n=>{this.eventList=n,n.length>0&&(this.params.events=n),this.crf.detectChanges(),this.calendar(this.params)})}ngOnInit(){this._us.user$.subscribe(n=>{this.user=n,n&&n.id&&(this.customerDetails.name=n.firstName,this.customerDetails.email=n.email,this.customerDetails.phone_number=n.phone,this.meta.counsumer_id=n.id)}),this.plans$.subscribe()}clickedOnDay(n){const t=new Date(this.today),o=new Date(n._d);this.selectedPeriod=o,this.newBooking.start=this.selectedPeriod,this.canCreate=t.getTime()<o.getTime(),this.tagetCreate&&(this.canCreate=!0)}submit(){var n=this;return(0,p.Z)(function*(){let t="";n.message="",n.newBooking.country||(t+="Country (*) is required"),n.newBooking.postal||(t+="Postal (*) is required"),n.newBooking.name||(t+="Address (*) is required"),n.newBooking.start||(t+="Start date (*) is required"),n.newBooking.end||(t+="End date (*) is required"),n.newBooking.description||(t+="Description (*) is required"),n.newBooking.frequency||(t+="Frequency (*) is required"),n.newBooking.pricing||(t+="Pricing (*) is required"),t.length>1?n.message=t:yield n.payViaPromise().then(o=>{"successful"==o.status?(n.newBooking.payment=o,n.newBooking.status=o.status,n.newBooking.created_at=n.today,n.newBooking.updated_at=n.today,n.newBooking.title=void 0,n.newBooking.date=void 0,n.newBooking.user=n.user,n._bs.add(n.newBooking).subscribe(i=>{n.newBooking={postal:"",start:n.today,end:null,description:"",name:"",frequency:"",extra_service:"",color:"fc-bg-default",icon:"circle",cleaner:null,country:"",pricing:null,user:null,payment:null,status:"",created_at:"",updated_at:""},n.message="New booking created.";const v=document.getElementById("dismisscreateModal");v&&v.click(),n._ds.openSuccessNotification("New Booking Created","Successfully placed a new booking"),n.bookings$.subscribe(Z=>{n.eventList=Z,n.params.events=Z,n.crf.detectChanges(),n.calendar(n.params)})})):n.message="Issues with payment from payment gateway. Please rectify payment issues with https://flutterwave.com/",n.flutterwave.closePaymentModal(5)}).finally(()=>{n.bookings$.subscribe(o=>{n.crf.detectChanges(),n.calendar(n.params)})})})()}}return a.\u0275fac=function(n){return new(n||a)(e.Y36(T.U),e.Y36(A.Bh),e.Y36(M.D),e.Y36(c.K),e.Y36(b.q),e.Y36(e.sBO))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-calendar"]],inputs:{id:"id",tagetCreate:"tagetCreate"},decls:30,vars:5,consts:[[1,"pd-20","card-box","mb-30"],[1,"calendar-wrap"],[3,"id"],["id","modal-view-event",1,"modal","modal-top","fade","calendar-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-body"],[1,"h4"],[1,"event-icon","weight-400","mr-3"],[1,"event-title"],[1,"event-postal"],[1,"event-country"],[1,"event-frequency"],[1,"event-start"],[1,"event-end"],[1,"event-cleaner"],[1,"event-body"],[1,"event-extra_service"],[1,"modal-footer"],["type","button","id","dismisscreateModal","data-dismiss","modal",1,"btn","btn-primary"],["id","modal-view-event-add",1,"modal","modal-top","fade","calendar-modal"],[1,"modal-dialog","modal-lg","modal-dialog-centered"],["id","add-event"],["class","modal-body",4,"ngIf"],["class","modal-body","id","accordion",4,"ngIf"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button","class","btn btn-primary",4,"ngIf"],[1,"row"],[1,"col-9"],[1,"text-blue","h4","mb-10"],[1,"col-3","text-right"],["type","button","data-dismiss","modal","id","closeCreateModal",1,"btn","btn-sm","btn-outline-danger"],[1,"form-group"],[1,"text-danger"],["name","country",1,"form-control",3,"ngModel","ngModelChange"],["value","","selected",""],["value","USA"],["value","UK"],["value","Nigeria"],["type","text","name","name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","postal",1,"form-control",3,"ngModel","ngModelChange"],["type","datetime-local","name","start",1,"datetimepicker","form-control",3,"ngModel","min","ngModelChange"],["type","datetime-local","name","end",1,"datetimepicker","form-control",3,"ngModel","min","ngModelChange"],["name","description","placeholder","Enter your property details: Number of bedrooms and bathrooms and more",1,"form-control",3,"ngModel","ngModelChange"],["name","frequency",1,"form-control",3,"ngModel","ngModelChange"],["value","Weekly"],["value","Fortnightly"],["value","One-off"],["value","Multiple days a week"],["name","pricing",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","extra_service",1,"form-control",3,"ngModel","ngModelChange"],["value","Ironing"],["value","Oven cleaning"],["value","Fridge cleaning"],["value","window cleaning"],["value","Laundry cleaning supplies and detergents"],["class","form-group",4,"ngIf"],[3,"value"],["name","cleaner",1,"form-control",3,"ngModel","ngModelChange"],["id","accordion",1,"modal-body"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-header"],["data-toggle","collapse",1,"btn","btn-block"],["data-parent","#accordion",1,"collapse",3,"id"],[1,"card-body"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-primary"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"h4",7),e._UZ(8,"span",8),e._UZ(9,"span",9),e.qZA(),e._UZ(10,"div",10),e._UZ(11,"div",11),e._UZ(12,"div",12),e._UZ(13,"div",13),e._UZ(14,"div",14),e._UZ(15,"div",15),e._UZ(16,"div",16),e._UZ(17,"div",17),e.qZA(),e.TgZ(18,"div",18),e.TgZ(19,"button",19),e._uU(20," Close "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",20),e.TgZ(22,"div",21),e.TgZ(23,"div",5),e.TgZ(24,"form",22),e.YNc(25,x,100,21,"div",23),e.YNc(26,U,5,4,"div",24),e.TgZ(27,"div",18),e.YNc(28,E,2,0,"button",25),e.YNc(29,O,2,0,"button",26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(2),e.Q6J("id",t.id),e.xp6(23),e.Q6J("ngIf",t.canCreate),e.xp6(1),e.Q6J("ngIf",!t.canCreate),e.xp6(2),e.Q6J("ngIf",t.canCreate),e.xp6(1),e.Q6J("ngIf",!t.canCreate))},directives:[l._Y,l.JL,l.F,_.O5,l.EJ,l.JJ,l.On,l.YN,l.Kr,l.Fj,_.sg],pipes:[_.uU,_.Ov],styles:[""]}),a})()},6252:(P,h,s)=>{s.d(h,{D:()=>M});var p=s(6215),f=s(2340),C=s(3342),y=s(7349),e=s(7716),T=s(1841),A=s(4758);let M=(()=>{class c{constructor(l,_){this.http=l,this._us=_,this.listOfPlans=new p.X([]),this.plans$=this.listOfPlans.asObservable(),this.apiUrl=f.N.api,this.equalPlans=(u,q)=>{let m=!1;for(const[x,w]of Object.entries(u))Object.keys(q).some(U=>U==x)&&(m=!0);return m},this.getPlansApi$=this.getPlansApi().pipe((0,C.b)(u=>{this.listOfPlans.next(u)}),(0,y.d)(1))}getPlansApi(){return this.http.get(`${this.apiUrl}/plans`)}add(l){this.listOfPlans.value.unshift(Object.assign(Object.assign({},l),{id:this.listOfPlans.value.length+1})),this.listOfPlans.next([...this.listOfPlans.value])}}return c.\u0275fac=function(l){return new(l||c)(e.LFG(T.eN),e.LFG(A.K))},c.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()}}]);